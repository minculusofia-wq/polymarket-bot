<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Polymarket Bot Dashboard</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
</head>

<body>
    <div class="container">
        <header>
            <h1>üêã Polymarket Bot</h1>
            <div class="status-badge" id="status-badge">Online</div>
        </header>

        <div class="grid">
            <!-- Stats Cards -->
            <div class="card">
                <h3>Total Whales</h3>
                <div class="value" id="total-whales">0</div>
            </div>
            <div class="card">
                <h3>Active Positions</h3>
                <div class="value" id="active-positions">0</div>
            </div>
            <div class="card">
                <h3>Balance (Paper)</h3>
                <div class="value" id="balance">$0.00</div>
            </div>
        </div>

        <div class="main-content">
            <!-- Whales Leaderboard -->
            <div class="section">
                <h2>üèÜ Top Whales</h2>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Rank</th>
                                <th>Address</th>
                                <th>Score</th>
                                <th>Volume</th>
                                <th>Tags</th>
                            </tr>
                        </thead>
                        <tbody id="whales-table">
                            <!-- Populated by JS -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Trade History -->
            <div class="section">
                <h2>üìú Trade History</h2>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Time</th>
                                <th>Market</th>
                                <th>Outcome</th>
                                <th>Amount</th>
                                <th>Whale</th>
                            </tr>
                        </thead>
                        <tbody id="history-table">
                            <!-- Populated by JS -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Settings Panel -->
            <div class="section">
                <h2>‚öôÔ∏è Param√®tres de Trading</h2>

                <!-- Trading Mode Toggle -->
                <div class="trading-mode-toggle">
                    <h3>Mode de Trading</h3>
                    <div class="toggle-container">
                        <span id="mode-label">Paper Trading</span>
                        <button id="toggle-mode-btn" class="toggle-btn" onclick="toggleTradingMode()">
                            üîÑ Passer au Real Trading
                        </button>
                    </div>
                    <p class="settings-note">‚ö†Ô∏è <strong>Attention :</strong> Le Real Trading utilise de vrais fonds.
                        Assurez-vous d'avoir configur√© votre wallet.</p>
                </div>

                <div class="settings-grid">
                    <div class="setting-item readonly">
                        <label>Mode</label>
                        <div class="value" id="setting-mode">Paper Trading</div>
                    </div>
                    <div class="setting-item readonly">
                        <label>Capital (Paper)</label>
                        <div class="value" id="setting-capital">$0.00</div>
                    </div>
                    <div class="setting-item">
                        <label>Max Position Size ($)</label>
                        <input type="number" id="input-max-position" step="0.1" min="1">
                    </div>
                    <div class="setting-item">
                        <label>Stop Loss (%)</label>
                        <input type="number" id="input-stop-loss" step="1" min="0" max="100">
                    </div>
                    <div class="setting-item">
                        <label>Take Profit (%)</label>
                        <input type="number" id="input-take-profit" step="1" min="0" max="100">
                    </div>
                    <div class="setting-item">
                        <label>Max Open Positions</label>
                        <input type="number" id="input-max-positions" value="5" min="1" max="20">
                    </div>
                    <div class="setting-item">
                        <label>Max Traders to Copy</label>
                        <input type="number" id="input-max-traders" value="3" min="1" max="5">
                    </div>
                    <div class="setting-item">
                        <label>Min Whale Score</label>
                        <input type="number" id="input-min-score" step="1" min="0" max="100">
                    </div>
                    <div class="setting-item">
                        <label>Scan Interval (sec)</label>
                        <input type="number" id="input-scan-interval" step="10" min="10" max="300">
                    </div>

                    <div class="setting-item"
                        style="grid-column: 1 / -1; margin-top: 10px; display: flex; align-items: center; gap: 10px;">
                        <input type="checkbox" id="auto-copy-sells" style="width: auto;">
                        <label for="auto-copy-sells" style="margin: 0; font-weight: 600;">Copier les Ventes
                            Automatiquement</label>
                    </div>
                </div>
                <button class="save-btn" onclick="saveSettings()">üíæ Sauvegarder les Param√®tres</button>
                <p class="settings-note">üí° Les param√®tres seront sauvegard√©s dans <code>config.py</code> et appliqu√©s
                    au prochain red√©marrage</p>
            </div>

            <!-- Whitelist Section -->
            <div class="section">
                <h2>üõ°Ô∏è Whitelist (Wallets √† Copier)</h2>
                <div class="whitelist-controls">
                    <input type="text" id="whitelist-input" placeholder="Adresse du wallet (0x...)"
                        class="whitelist-input">
                    <button class="add-btn" onclick="addToWhitelist()">‚ûï Ajouter</button>
                </div>
                <div class="whitelist-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Adresse</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="whitelist-table">
                            <!-- Populated by JS -->
                        </tbody>
                    </table>
                </div>
            </div>

            <!-- Wallet Configuration Section -->
            <div class="section">
                <h2>üîë Configuration du Wallet</h2>
                <p class="settings-note">‚ö†Ô∏è <strong>S√©curit√© :</strong> Votre cl√© priv√©e est sauvegard√©e localement dans
                    <code>.env</code>. Ne la partagez jamais !
                </p>
                <div class="wallet-config">
                    <label for="private-key-input">Cl√© Priv√©e (0x...)</label>
                    <input type="password" id="private-key-input" placeholder="0x..." class="wallet-input">
                    <button class="save-btn" onclick="saveWallet()">üíæ Sauvegarder le Wallet</button>
                </div>
            </div>

            <!-- Convergent Signals Section -->
            <div class="section">
                <h2>üéØ Signaux Convergents</h2>
                <p class="settings-note">D√©tection automatique des opportunit√©s √† haute confiance (Whales + Sources
                    d'info)</p>

                <!-- Configuration -->
                <div class="signal-config">
                    <h3>‚öôÔ∏è Configuration des Seuils</h3>
                    <div class="signal-sliders">
                        <div class="slider-group">
                            <label>Min Whales: <span id="min-whales-value">2</span></label>
                            <input type="range" id="min-whales-slider" min="0" max="5" value="2"
                                oninput="updateSignalConfig()">
                        </div>
                        <div class="slider-group">
                            <label>Min Sources: <span id="min-sources-value">1</span></label>
                            <input type="range" id="min-sources-slider" min="0" max="5" value="1"
                                oninput="updateSignalConfig()">
                        </div>
                    </div>
                    <button class="save-btn" onclick="saveSignalConfig()">üíæ Sauvegarder les Seuils</button>
                </div>

                <!-- Signals Display -->
                <h3 id="signals-header">üîî Signaux Actifs</h3>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>March√©</th>
                                <th>Whales</th>
                                <th>Sources</th>
                                <th>Score</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="signals-table">
                            <!-- Populated by JS -->
                        </tbody>
                    </table>
                </div>

                <!-- Modal for Signal Details -->
                <div id="signal-modal" class="modal" onclick="closeSignalModal()">
                    <div class="modal-content" onclick="event.stopPropagation()">
                        <span class="close" onclick="closeSignalModal()">&times;</span>
                        <h3>üìä D√©tails du Signal</h3>
                        <div id="modal-body"></div>
                    </div>
                </div>
            </div>

            <!-- Opportunities Tab -->
            <div class="section">
                <h2>üéØ Opportunit√©s D√©tect√©es</h2>

                <h3>üî• March√©s Tendance</h3>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Question</th>
                                <th>Volume</th>
                                <th>Action</th>
                            </tr>
                        </thead>
                        <tbody id="trending-table">
                            <!-- Populated by JS -->
                        </tbody>
                    </table>
                </div>

                <h3>üìà Mouvements de Prix</h3>
                <div class="table-container">
                    <table>
                        <thead>
                            <tr>
                                <th>Market</th>
                                <th>Changement</th>
                                <th>D√©tect√©</th>
                            </tr>
                        </thead>
                        <tbody id="movements-table">
                            <!-- Populated by JS -->
                        </tbody>
                    </table>
                </div>

                <h3>üîç Alertes Mots-Cl√©s</h3>
                <div class="keywords-grid" id="keywords-grid">
                    <!-- Populated by JS -->
                </div>

                <h3>üì∞ Actualit√©s (NewsAPI & CoinStats)</h3>
                <div class="news-list" id="news-list">
                    <!-- Populated by JS -->
                </div>

                <h3>üó£Ô∏è Discussions Reddit (r/CryptoCurrency)</h3>
                <div class="news-list" id="reddit-list">
                    <!-- Populated by JS -->
                </div>

                <h3>üìÖ √âv√©nements CoinGecko</h3>
                <div class="news-list" id="events-list">
                    <!-- Populated by JS -->
                </div>

                <h3>üöÄ Sentiment LunarCrush</h3>
                <div class="keywords-grid" id="sentiment-grid">
                    <!-- Populated by JS -->
                </div>

                <h3>üé• Vid√©os YouTube (SerpAPI)</h3>
                <div class="news-list" id="videos-list">
                    <!-- Populated by JS -->
                </div>
            </div>
        </div>
    </div>
    <script src="app.js"></script>
</body>

</html>